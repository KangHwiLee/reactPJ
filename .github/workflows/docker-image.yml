name: Docker Image CI

on:
  push:
    branches: [ "master" ]
#    paths:
#        - "front-end/**"

jobs:
  build:
    # 실행 환경 지정
    runs-on: ubuntu-22.04
    # Task의 sequence를 명시한다.
    # ${{ secrets.PRIVATE_KEY }}
    steps:
      - uses: actions/checkout@v2

      - name: Check Node v            # Node v 확인
        run: node -v
        
      - name: Install dependencies    # 의존 파일 설치
        working-directory: ./front-end
        run: npm install
      
      - name: Generate build          # React Build
        run: npm run build
      
      - name: Docker build
        run : docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}
              docker build -t ${{ secrets.DOCKER_REPO }}/front-end .
              docker push ${{ secrets.DOCKER_REPO }}/front-end 
